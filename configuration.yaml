homeassistant:
  name: !secret ha-name
  unit_system: imperial
  time_zone: !secret ha-timezone
  customize: !include customize.yaml

http:
  server_port: !secret ha-port
  base_url: !secret ha-url
  cors_allowed_origins:
    - https://google.com
    - https://www.home-assistant.io
    - http://cdn.clustrmaps.com

## FAVICON
favicon:
  title: !secret ha-name
  icon_path: /local/favicons/

## DEFAULT

mobile_app:
system_health:
hassio:
cloud:
config:
map:
sun:

frontend:
  javascript_version: latest
  themes: !include_dir_merge_named themes
  extra_html_url:
    - http://clustrmaps.com/map_v2.png?cl=ffffff&w=a&t=n&d=xr2Q2vt76X42HBH3uchXdk6LOOAJDVqAySTTK3bDWsM

updater:
  reporting: no
  include_used_components: false

###
### IP ADDRESSES
###

sensor external_ip:
  - platform: rest
    resource: http://ip.jsontest.com
    name: externalip
    value_template: >
      {%- if value_json is defined -%}
        {{ value_json.ip | default(null) }}
      {%- else -%}null{%- endif -%}

###
### DEVICE_TRACKER
###

device_tracker nmap_tracker:
  - platform: nmap_tracker
    hosts: 192.168.1.0/24
    home_interval: 10
    interval_seconds: 30
    new_device_defaults:
      track_new_devices: true
      hide_if_away: false
    consider_home: 180
    exclude:
      - 192.168.1.1
      - 192.168.1.2
      - 192.168.1.251

device_tracker mqtt_tracker:
  - platform: mqtt
    devices:
      dogpond: 'motion/+/dogpond/status/found'
      dogyard: 'motion/+/dogyard/status/found'
      woodshed: 'motion/+/woodshed/status/found'
      frontwalk: 'motion/+/frontwalk/status/found'
      laundry: 'motion/+/laundry/status/found'

###
### MQTT
###

mqtt:
  broker: !secret mqtt-broker
  port: !secret mqtt-port
  username: !secret mqtt-username
  password: !secret mqtt-password

###
### LOGGER component
###

logger:
  default: error
  logs:
    homeassistant.core: error
    homeassistant.setup: error
    homeassistant.loader: error
    homeassistant.components: error
    homeassistant.components.sensor: error
    homeassistant.components.automation: error
    homeassistant.components.template.binary_sensor: error
    homeassistant.components.template.sensor: error
    homeassistant.components.mqtt.sensor: error
    homeassistant.components.recorder: error
    homeassistant.components.recorder.util: error
    homeassistant.components.statistics.sensor: fatal

###
### RECORDER, HISTORY, LOGBOOK components
###

recorder: !include recorder.yaml
history: !include history.yaml
logbook: !include logbook.yaml

###
### PRIMARY components
###

group: !include groups.yaml
automation: !include automations.yaml
history_graph: !include history_graphs.yaml
input_boolean: !include input_booleans.yaml
input_text: !include input_texts.yaml
input_select: !include input_selects.yaml
input_number: !include input_numbers.yaml

## counters
counter: !include_dir_merge_named counter

###
### INFLUX
###

#influxdb:
#  host: !secret influxdb-host
#  port: 8086
#  database: homeassistant
#  username: homeassistant
#  password: !secret influxdb-password
#  max_retries: 3
#  default_measurement: state

###
### HOSTIP
###

sensor hostip:
  - platform: command_line
    command: echo '{"date":'$(date "+%s")',"hostname":"'$(hostname)'","ipv4":"'$(ip addr | egrep "global" | sed "s/.* \([0-9\.]*\)\/.*/\1/" | head -1)'"}'
    name: hostip
    scan_interval: 14400
    command_timeout: 30
    json_attributes:
      - date
      - hostname
      - ipv4
    value_template: >
      {%- if value_json is defined -%}
        {{ value_json.date | int | timestamp_custom("%a %b %d @ %I:%M %p") }}
      {%- else -%}null{%- endif -%}

###
### UNAME
###

sensor uname:
  - platform: command_line
    command: echo '{"date":'$(date "+%s")',"hardware":"'$(uname -m)'","nodename":"'$(uname -n)'","processor":"'$(uname -p)'","os_release":"'$(uname -r)'","os_name":"'$(uname -s)'","os_version":"'$(uname -v)'"}'
    name: uname
    scan_interval: 14400
    command_timeout: 30
    json_attributes:
      - date
      - hardware
      - nodename
      - os_release
      - os_name
      - os_version
    value_template: >
      {%- if value_json is defined -%}
        {{ value_json.date | int | timestamp_custom("%a %b %d @ %I:%M %p") }}
      {%- else -%}null{%- endif -%}

###
### PANEL
###
      
panel_iframe:
  netdata:
    title: NetData
    icon: mdi:speedometer
    url: !secret netdata
  hznmonitor:
    title: HZN monitor
    icon: mdi:factory
    url: !secret hznmonitor-url
#  edgex:
#    title: EdgeX
#    icon: mdi:mixer
#    url: !secret edgex-url
  digits:
    title: DIGITS
    icon: mdi:fingerprint
    url: !secret digits-url
#  grafana:
#    title: Grafana
#    icon: mdi:graphql
#    url: !secret grafana-url
  couchdb:
    title: CouchDB
    icon: mdi:sofa
    url: !secret couchdb-url
#  consul:
#    title: Consul
#    icon: mdi:passport
#    url: !secret consul-url

## WEBLINKS
weblink:
  entities:
    # this site
    - name: this_site
      url: https://github.com/dcmartin/horizon.dcmartin.com/blob/master/README.md
      icon: mdi:source-repository
    # hassio-addons
    - name: sdr2msghub_addon
      url: https://github.com/dcmartin/hassio-addons/blob/master/sdr2msghub/README.md
      icon: mdi:radio
    - name: kafka2mqtt4yolo_addon
      url: https://github.com/dcmartin/hassio-addons/blob/master/kafka2mqtt4yolo/README.md
      icon: mdi:message-text-outline
    # examples
    - name: sdr2msghub
      url: https://github.com/open-horizon/examples/tree/master/edge/msghub/sdr2msghub
      icon: mdi:radio
    # open-horizon patterns
    - name: yolo2msghub
      url: https://github.com/dcmartin/open-horizon/blob/master/yolo2msghub/README.md
      icon: mdi:glasses
    - name: motion2mqtt
      url: https://github.com/dcmartin/open-horizon/blob/master/motion2mqtt/README.md
      icon: mdi:video
    - name: hznsetup
      url: https://github.com/dcmartin/open-horizon/blob/master/hznsetup/README.md/
      icon: mdi:hospital-building
    - name: startup
      url: https://github.com/dcmartin/open-horizon/blob/master/startup/README.md/
      icon: mdi:baby
    # open-horizon services
    - name: hznmonitor
      url: https://github.com/dcmartin/open-horizon/blob/master/hznmonitor/README.md/
      icon: mdi:factory
    - name: yolo
      url: https://github.com/dcmartin/open-horizon/blob/master/yolo/README.md/
      icon: mdi:eye
    - name: yolo4motion
      url: https://github.com/dcmartin/open-horizon/blob/master/yolo4motion/README.md/
      icon: mdi:comment-eye-outline
    - name: wan
      url: https://github.com/dcmartin/open-horizon/blob/master/wan/README.md/
      icon: mdi:wan
    - name: cpu
      url: https://github.com/dcmartin/open-horizon/blob/master/cpu/README.md/
      icon: mdi:percent
    - name: hal
      url: https://github.com/dcmartin/open-horizon/blob/master/hal/README.md/
      icon: mdi:desktop-classic
    - name: mqtt
      url: https://github.com/dcmartin/open-horizon/blob/master/mqtt/README.md/
      icon: mdi:mmessage-text
    - name: mqtt2kafka
      url: https://github.com/dcmartin/open-horizon/blob/master/mqtt2kafka/README.md/
      icon: mdi:message-text-outline
    - name: master
      url: http://horizon.dcmartin.com:3092
      icon: mdi:link
    - name: beta
      url: http://horizon-vm.local:3092
      icon: mdi:link
    - name: edgex
      url: http://edgex.dcmartin.com:8500/ui
      icon: mdi:link

###
### EXCHANGE
###

sensor exchange: !include_dir_merge_list exchange/sensor/
binary_sensor exchange: !include_dir_merge_list exchange/binary_sensor/

###
### STARTUP
###

sensor startup: !include_dir_merge_list startup/sensor/
binary_sensor startup: !include_dir_merge_list startup/binary_sensor/

###
### YOLO2MSGHUB
###

sensor yolo2msghub: !include_dir_merge_list yolo2msghub/sensor/
binary_sensor yolo2msghub: !include_dir_merge_list yolo2msghub/binary_sensor/
camera yolo2msghub: !include_dir_merge_list yolo2msghub/camera/

###
### SDR2MSGHUB
###

sensor sdr2msghub: !include_dir_merge_list sdr2msghub/sensor/
binary_sensor sdr2msghub: !include_dir_merge_list sdr2msghub/binary_sensor/

###
### HZNMONITOR
###

sensor hznmonitor: !include_dir_merge_list hznmonitor/sensor/
binary_sensor hznmonitor: !include_dir_merge_list hznmonitor/binary_sensor/

###
### HZNSETUP
###

sensor hznsetup: !include_dir_merge_list hznsetup/sensor/
binary_sensor hznsetup: !include_dir_merge_list hznsetup/binary_sensor/

###
### INTERNET TEST
###

sensor internet: !include_dir_merge_list internet/sensor/
binary_sensor internet: !include_dir_merge_list internet/binary_sensor/
            
###
### MOTION
###

sensor motion: !include_dir_merge_list motion/sensor/
binary_sensor motion: !include_dir_merge_list motion/binary_sensor/
camera motion: !include_dir_merge_list motion/camera/

# automation motion: !include_dir_merge_list motion/automation/
# input_select motion: !include_dir_merge_list motion/input_select/
# history_graph motion: !include_dir_merge_list motion/history_graph/
